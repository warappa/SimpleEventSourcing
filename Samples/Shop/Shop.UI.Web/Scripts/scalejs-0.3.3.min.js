define("scalejs",[],function(){var n;return{load:function(e,t,o,r){var i;return"extensions"===e?(r.scalejs&&r.scalejs.extensions?(n=r.scalejs.extensions,t(n,function(){o(Array.prototype.slice(arguments))})):t(["scalejs/extensions"],function(){o(Array.prototype.slice(arguments))},function(){o([])}),void 0):0===e.indexOf("application")?(i=e.substring("application".length+1).match(/([^,]+)/g)||[],i=i.map(function(n){return-1===n.indexOf("/")?"app/"+n+"/"+n+"Module":n}),i.push("scalejs/application"),t(["scalejs!extensions"],function(){t(i,function(){var n=arguments[arguments.length-1],e=Array.prototype.slice.call(arguments,0,arguments.length-1);r.isBuild||n.registerModules.apply(null,e),o(n)})}),void 0):(t(["scalejs/"+e],function(n){o(n)}),void 0)},write:function(e,t,o){"scalejs"===e&&0===t.indexOf("application")&&o('define("scalejs/extensions", '+JSON.stringify(n)+", function () { return Array.prototype.slice(arguments); })")}}}),define("scalejs/base.type",[],function(){function n(n){if(void 0===n)return"undefined";if(null===n)return"null";var e,t={}.toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();return"object"!==t?t:(e=n.constructor.toString().match(/^function\s*([$A-Z_][0-9A-Z_$]*)/i),null===e?"object":e[1])}function e(n){var t,o,r,i,a,c=arguments.length,u=c-1,l=n;if(0===c)return!1;if(1===c)return null!==n&&n!==t;if(c>2)for(o=0;u-1>o;o+=1){if(!e(l))return!1;l=l[arguments[o+1]]}return r=arguments[u],null===l?null===r||"null"===r:l===t?r===t||"undefined"===r:""===r?l===r:(i=typeof r,"string"===i?(a=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),a===r):"function"===i?l instanceof r:l===r)}return{is:e,typeOf:n}}),define("scalejs/base.object",["./base.type"],function(n){function e(n){var e,t,o,r=n;if(!u(r))return!1;for(e=1,t=arguments.length;t>e;e+=1)if(o=arguments[e],r=r[o],!u(r))return!1;return!0}function t(n,o){var r;for(r in o)o.hasOwnProperty(r)&&(n[r]=e(o,r)&&o[r].constructor===Object&&e(n,r)?t(n[r],o[r]):o[r]);return n}function o(){var n,e=arguments,o=e.length,r={};for(n=0;o>n;n+=1)t(r,e[n]);return r}function r(n){return o({},n)}function i(n,o,r){var i,a=e(r)?r.split("."):[],c=n;for(i=0;i<a.length;i+=1)e(c,a[i])||(c[a[i]]={}),c=c[a[i]];return t(c,o),c}function a(n,t,o){var r,i,a=t.split("."),c=!0;for(r=0;r<a.length;r+=1){if(i=a[r],!e(n,i)){c=!1;break}n=n[i]}return c?n:o}function c(n,t){return e(n)?n:t}var u=n.is;return{has:e,valueOrDefault:c,merge:o,extend:i,clone:r,get:a}}),define("scalejs/base.array",["./base.object"],function(n){function e(n,e){n.indexOf(e)<0&&n.push(e)}function t(n,e){var t=n.indexOf(e);t>-1&&n.splice(t,1)}function o(n){n.splice(0,n.length)}function r(n,e,t){return e=c(e,0),t=c(t,n.length),Array.prototype.slice.call(n,e,t)}function i(n,e,t){var o,r;for(o=0,r=n.length;r>o;o+=1)if(n.hasOwnProperty(o)&&e.call(t,n[o],o,n))return n[o];return null}function a(n,e,t){var o,i,a=[];for(o=n.length;o--;a[o]=n[o]);return i=r(a,e,t)}var c=n.valueOrDefault;return{addOne:e,removeOne:t,removeAll:o,copy:r,find:i,toArray:a}}),define("scalejs/base.log",[],function(){var n=["log","info","warn","error"],e={};return void 0!==window.console?("object"==typeof console.log?n.forEach(function(n){e[n]=this.bind(console[n],console)},Function.prototype.call):n.forEach(function(n){e[n]=console[n]?console[n].bind(console):console.log.bind(console)}),e.debug=e.info):(n.forEach(function(n){e[n]=function(){}}),n.debug=function(){}),e.formatException=function(n){var e=n.stack?String(n.stack):"",t=n.message||"";return"Error: "+t+"\nStack: "+e},e}),define("scalejs/base",["./base.array","./base.log","./base.object","./base.type"],function(n,e,t,o){return{type:o,object:t,array:n,log:e}}),define("scalejs/core",["./base"],function(n){function e(n){try{if(c(n,"function")){var e=n(f);return e&&(u(f,e),l(p,e)),void 0}if(c(n,"buildCore","function"))return n.buildCore(f),l(p,n),void 0;if(a(n,"core"))return u(f,n.core),l(p,n),void 0;u(f,n),l(p,n)}catch(t){s("Fatal error during application initialization. ",'Failed to build core with extension "',n,"See following exception for more details.",t)}}function t(n){if(!a(n))throw new Error("Sandbox name is required to build a sandbox.");var e={type:f.type,object:f.object,array:f.array,log:f.log};return p.forEach(function(n){try{if(c(n,"buildSandbox","function"))return n.buildSandbox(e),void 0;if(a(n,"sandbox"))return u(e,n.sandbox),void 0;u(e,n)}catch(t){throw s("Fatal error during application initialization. ",'Failed to build sandbox with extension "',n,"See following exception for more details.",t),t}}),e}function o(n){d.push(n)}function r(){g||(g=!0,d.forEach(function(n){n("started")}))}function i(){g&&(g=!1,d.forEach(function(n){n("stopped")}))}var a=n.object.has,c=n.type.is,u=n.object.extend,l=n.array.addOne,s=n.log.error,f={},p=[],d=[],g=!1;return u(f,{type:n.type,object:n.object,array:n.array,log:n.log,buildSandbox:t,notifyApplicationStarted:r,notifyApplicationStopped:i,onApplicationEvent:o,isApplicationRunning:function(){return g},registerExtension:e})}),define("scalejs/application",["scalejs!core"],function(n){function e(){if(n.isApplicationRunning())throw new Error("Can't register module since the application is already running.","Dynamic module loading is not supported.");Array.prototype.push.apply(f,u(arguments).filter(function(n){return n}))}function t(n){var e,t;if("function"==typeof n)try{e=n()}catch(o){t=n.getId?n.getId():n.name,l('Failed to create an instance of module "'+t+'".',"Application will continue running without the module. See following exception stack for more details.",o.stack)}else e=n;return c(p,e),e}function o(){f.forEach(t)}function r(){s("Application started."),n.notifyApplicationStarted()}function i(){o(),r()}function a(){s("Application exited."),n.notifyApplicationStopped()}var c=n.array.addOne,u=n.array.toArray,l=n.log.error,s=n.log.debug,f=[],p=[];return{registerModules:e,run:i,exit:a}});